{% extends 'customadmin/change_list.html' %} {% load static %} {% load admin_extras %} {% load misc_filters %} {% load i18n %} {% block page_content %} {% csrf_token %} {% include "customadmin/includes/list_header_card.html" with title="Add a new Video" subtitle="Add a new Video" show_button=True %}

<div class="ibox float-e-margins">
  {% comment %}
  <div class="ibox-title">
    <div class="ibox-tools">
      {% if perms.users.add_user %}
      <a href="{% url opts|admin_urlname:'create' %}" class="btn btn-primary btn-lg"><i class="fa fa-plus"></i> Add {{ opts.verbose_name|capfirst }}</a> {% endif %}
    </div>
  </div>
  {% endcomment %}
  <div class="ibox-content">
    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover" id="{{ opts.model_name }}-table">
        <thead>
          <tr>
            <th>Category</th>
            <th>Video</th>
            <th></th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <th>Category</th>
            <th>Video</th>
            <th></th>
          </tr>
        </tfoot>
        <tbody>
          {% for o in object_list %}
          <tr>
            <td>{{ o.category}}</td>
            {% if o.video %}
            <td height="100px" width="100px">
              <a target="_blank" href="{{MEDIA_URL}}{{ o.video.url }}">
                <video src="{{MEDIA_URL}}{{ o.video.url }}" alt="no video" height="100px" width="100px" type="video/mp4" controls />
              </a>
            </td>
            {% else %}
            <td>No video</td>
            {% endif %}
            <td class="row-actions">{% include "customadmin/partials/list_row_actions.html" %}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %} {% block js %} {{ block.super }}
<script src="{% static 'customadmin/js/userroles.js' %}"></script>
<script>
  var pagination_url = "{% url 'customadmin:mediavideo-list-ajax' %}";
  $(function () {
    userroles.mediavideo.index();
  });
</script>
{% endblock %}
